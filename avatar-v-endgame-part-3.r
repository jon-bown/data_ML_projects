{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/jonbown/avatar-v-endgame-part-3?scriptVersionId=120320657\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown","outputs":[],"execution_count":0},{"cell_type":"markdown","id":"068b9e7d","metadata":{"papermill":{"duration":0.010494,"end_time":"2023-02-25T22:11:44.451626","exception":false,"start_time":"2023-02-25T22:11:44.441132","status":"completed"},"tags":[]},"source":["# Avatar V Endgame: Conclusion\n","\n","This notebook is part three of what was originally from an rmd file I put together in 2019. I decided to dust it off and add it to my Kaggle profile. In this final part I go through the re-release numbers and give some more of my thoughts in the comparison.\n","\n","I also demonstrate some useful R/Markdown code including:\n","\n","- R/Plotly visualizations\n","- R/Plotly with HTML widgets\n","- Lazyweave R package\n","- Markdown formatting with kableExtra\n","- Using images in markdown\n","\n","I hope to add more custom formatting in the future once I figure out CSS/Jupyter. \n","\n","I welcome any feedback!\n","\n","\n","Enjoy!"]},{"cell_type":"markdown","id":"61b69aa2","metadata":{"papermill":{"duration":0.006826,"end_time":"2023-02-25T22:11:44.465086","exception":false,"start_time":"2023-02-25T22:11:44.45826","status":"completed"},"tags":[]},"source":["<h2 ><center>Table of Contents </center></h2>\n","\n","\n","* [Preprocessing](#chapter1)\n","* [Re-Release](#chapter2)\n","* [Final Thoughts](#chapter3)\n","* [Sources](#chapter4)\n","* [Appendix](#chapter5)\n","    * [Weekly](#chapter6)\n","    * [Weekend](#chapter7)\n","    * [Theaters](#chapter8)"]},{"cell_type":"code","execution_count":1,"id":"da7f2fd1","metadata":{"_execution_state":"idle","_uuid":"051d70d956493feee0c6d64651c6a088724dca2a","execution":{"iopub.execute_input":"2023-02-25T22:11:44.484275Z","iopub.status.busy":"2023-02-25T22:11:44.481634Z","iopub.status.idle":"2023-02-25T22:11:45.812932Z","shell.execute_reply":"2023-02-25T22:11:45.811006Z"},"papermill":{"duration":1.344139,"end_time":"2023-02-25T22:11:45.815729","exception":false,"start_time":"2023-02-25T22:11:44.47159","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["── \u001b[1mAttaching packages\u001b[22m ─────────────────────────────────────── tidyverse 1.3.1 ──\n","\n","\u001b[32m✔\u001b[39m \u001b[34mggplot2\u001b[39m 3.3.6     \u001b[32m✔\u001b[39m \u001b[34mpurrr  \u001b[39m 0.3.4\n","\u001b[32m✔\u001b[39m \u001b[34mtibble \u001b[39m 3.1.7     \u001b[32m✔\u001b[39m \u001b[34mdplyr  \u001b[39m 1.0.9\n","\u001b[32m✔\u001b[39m \u001b[34mtidyr  \u001b[39m 1.2.0     \u001b[32m✔\u001b[39m \u001b[34mstringr\u001b[39m 1.4.0\n","\u001b[32m✔\u001b[39m \u001b[34mreadr  \u001b[39m 2.1.2     \u001b[32m✔\u001b[39m \u001b[34mforcats\u001b[39m 0.5.1\n","\n","── \u001b[1mConflicts\u001b[22m ────────────────────────────────────────── tidyverse_conflicts() ──\n","\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mfilter()\u001b[39m masks \u001b[34mstats\u001b[39m::filter()\n","\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mlag()\u001b[39m    masks \u001b[34mstats\u001b[39m::lag()\n","\n"]},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'avatar-box-office'</li><li>'avengers-endgame-box-office'</li><li>'movie-budgets-ranking'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 'avatar-box-office'\n","\\item 'avengers-endgame-box-office'\n","\\item 'movie-budgets-ranking'\n","\\end{enumerate*}\n"],"text/markdown":["1. 'avatar-box-office'\n","2. 'avengers-endgame-box-office'\n","3. 'movie-budgets-ranking'\n","\n","\n"],"text/plain":["[1] \"avatar-box-office\"           \"avengers-endgame-box-office\"\n","[3] \"movie-budgets-ranking\"      "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'avatar_domestic_weekend.csv'</li><li>'avatar_domestic_weekly.csv'</li><li>'avatar_foreign.csv'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 'avatar\\_domestic\\_weekend.csv'\n","\\item 'avatar\\_domestic\\_weekly.csv'\n","\\item 'avatar\\_foreign.csv'\n","\\end{enumerate*}\n"],"text/markdown":["1. 'avatar_domestic_weekend.csv'\n","2. 'avatar_domestic_weekly.csv'\n","3. 'avatar_foreign.csv'\n","\n","\n"],"text/plain":["[1] \"avatar_domestic_weekend.csv\" \"avatar_domestic_weekly.csv\" \n","[3] \"avatar_foreign.csv\"         "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'endgame_domestic_weekend.csv'</li><li>'endgame_domestic_weekly_w_rerelease.csv'</li><li>'endgame_domestic_weekly.csv'</li><li>'endgame_foreign.csv'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 'endgame\\_domestic\\_weekend.csv'\n","\\item 'endgame\\_domestic\\_weekly\\_w\\_rerelease.csv'\n","\\item 'endgame\\_domestic\\_weekly.csv'\n","\\item 'endgame\\_foreign.csv'\n","\\end{enumerate*}\n"],"text/markdown":["1. 'endgame_domestic_weekend.csv'\n","2. 'endgame_domestic_weekly_w_rerelease.csv'\n","3. 'endgame_domestic_weekly.csv'\n","4. 'endgame_foreign.csv'\n","\n","\n"],"text/plain":["[1] \"endgame_domestic_weekend.csv\"           \n","[2] \"endgame_domestic_weekly_w_rerelease.csv\"\n","[3] \"endgame_domestic_weekly.csv\"            \n","[4] \"endgame_foreign.csv\"                    "]},"metadata":{},"output_type":"display_data"}],"source":["# This R environment comes with many helpful analytics packages installed\n","# It is defined by the kaggle/rstats Docker image: https://github.com/kaggle/docker-rstats\n","# For example, here's a helpful package to load\n","\n","library(tidyverse) # metapackage of all tidyverse packages\n","\n","# Input data files are available in the read-only \"../input/\" directory\n","# For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory\n","\n","list.files(path = \"../input\")\n","\n","list.files(path = \"../input/avatar-box-office\")\n","\n","list.files(path = \"../input/avengers-endgame-box-office\")\n","\n","#CONSTANTS\n","av_fp <- \"../input/avatar-box-office/\"\n","end_fp <- \"../input/avengers-endgame-box-office/\"\n","bud_fp <- \"../input/movie-budgets-ranking/\""]},{"cell_type":"code","execution_count":2,"id":"902c70ab","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:11:45.864027Z","iopub.status.busy":"2023-02-25T22:11:45.832873Z","iopub.status.idle":"2023-02-25T22:12:20.799486Z","shell.execute_reply":"2023-02-25T22:12:20.797629Z"},"papermill":{"duration":34.978922,"end_time":"2023-02-25T22:12:20.802336","exception":false,"start_time":"2023-02-25T22:11:45.823414","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["Installing packages into ‘/usr/local/lib/R/site-library’\n","(as ‘lib’ is unspecified)\n","\n","also installing the dependency ‘labelVector’\n","\n","\n"]}],"source":["install.packages(c('captioner', 'lazyWeave'))"]},{"cell_type":"code","execution_count":3,"id":"dab44010","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:20.822137Z","iopub.status.busy":"2023-02-25T22:12:20.820453Z","iopub.status.idle":"2023-02-25T22:12:21.429204Z","shell.execute_reply":"2023-02-25T22:12:21.427455Z"},"papermill":{"duration":0.621174,"end_time":"2023-02-25T22:12:21.431916","exception":false,"start_time":"2023-02-25T22:12:20.810742","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["\n","Attaching package: ‘kableExtra’\n","\n","\n","The following object is masked from ‘package:dplyr’:\n","\n","    group_rows\n","\n","\n","\n","Please cite as: \n","\n","\n"," Hlavac, Marek (2022). stargazer: Well-Formatted Regression and Summary Statistics Tables.\n","\n"," R package version 5.2.3. https://CRAN.R-project.org/package=stargazer \n","\n","\n","\n","Attaching package: ‘plotly’\n","\n","\n","The following object is masked from ‘package:ggplot2’:\n","\n","    last_plot\n","\n","\n","The following object is masked from ‘package:stats’:\n","\n","    filter\n","\n","\n","The following object is masked from ‘package:graphics’:\n","\n","    layout\n","\n","\n","The following object is masked from ‘package:httr’:\n","\n","    config\n","\n","\n","\n","Attaching package: ‘scales’\n","\n","\n","The following object is masked from ‘package:purrr’:\n","\n","    discard\n","\n","\n","The following object is masked from ‘package:readr’:\n","\n","    col_factor\n","\n","\n"]}],"source":["knitr::opts_chunk$set(echo = FALSE, fig.width=12, fig.height=8, fig.align=\"center\", warn=-1)\n","options(warn=-1)\n","library(kableExtra)\n","library(stargazer)\n","library(readxl)\n","library(openxlsx)\n","library(plotly)\n","library(scales)\n","library(lazyWeave)\n","library(IRdisplay)\n","options(lazyReportFormat = \"markdown\")\n","table_nums <- captioner::captioner(prefix = \"Table\")\n","f.ref <- function(x) {\n","  stringr::str_extract(table_nums(x), \"[^:]*\")\n","}"]},{"cell_type":"code","execution_count":4,"id":"b837b5e9","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:21.453099Z","iopub.status.busy":"2023-02-25T22:12:21.451122Z","iopub.status.idle":"2023-02-25T22:12:21.501441Z","shell.execute_reply":"2023-02-25T22:12:21.49963Z"},"papermill":{"duration":0.062938,"end_time":"2023-02-25T22:12:21.503822","exception":false,"start_time":"2023-02-25T22:12:21.440884","status":"completed"},"tags":[]},"outputs":[],"source":["#Read in box office numbers\n","av_dom_weeknd <- read.csv(paste(av_fp,'avatar_domestic_weekend.csv', sep=\"\"), stringsAsFactors = FALSE, header = TRUE)\n","\n","av_dom_weekly <- read.csv(paste(av_fp, 'avatar_domestic_weekly.csv', sep=\"\"), stringsAsFactors = FALSE, header = TRUE)\n","\n","end_dom_weeknd <- read.csv(paste(end_fp, 'endgame_domestic_weekend.csv', sep=\"\"), stringsAsFactors = FALSE, header = TRUE)\n","\n","end_dom_weekly <- read.csv(paste(end_fp, 'endgame_domestic_weekly_w_rerelease.csv', sep=\"\"), stringsAsFactors = FALSE, header = TRUE)\n","\n","cols_av <- c(\"Date\", \"Rank\", \"Weekly\", \"Pct_change\", \"Theaters\", \"Tht_change\", \"Avg_change\", \"Cum_gross\", \"Week_no\", \"Tickets\")\n","\n","cols_end_wknd <- c(\"Date\", \"Rank\",\"Gross\", \"Gross_adj\", \"Pct_change\", \"Theaters\", \"Tht_change\", \"Avg_change\", \"Cum_gross\",\"Tickets\", \"Week_no\")\n","\n","cols_end_wk <- c(\"Date\", \"Rank\",\"Gross\", \"Gross_adj\", \"Pct_change\", \"Theaters\", \"Tht_change\", \"Avg_change\", \"Cum_gross\", \"Week_no\")\n","\n"]},{"cell_type":"code","execution_count":5,"id":"405f1bf6","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:21.523377Z","iopub.status.busy":"2023-02-25T22:12:21.521869Z","iopub.status.idle":"2023-02-25T22:12:21.551944Z","shell.execute_reply":"2023-02-25T22:12:21.550128Z"},"papermill":{"duration":0.042488,"end_time":"2023-02-25T22:12:21.554422","exception":false,"start_time":"2023-02-25T22:12:21.511934","status":"completed"},"tags":[]},"outputs":[],"source":["#Foreign Data\n","av_for <- read.csv(paste(av_fp,'avatar_foreign.csv', sep=\"\"), stringsAsFactors = FALSE, header = TRUE)\n","end_for <- read.csv(paste(end_fp,'endgame_foreign.csv', sep=\"\"), stringsAsFactors = FALSE, header = TRUE)\n","\n","cols_end_for <- c(\"country\", \"distribution\", \"release_date\", \"open_gross\", \"gross_share\", \"gross\", \"dt\", \"population\", \"region\")\n","cols_av_for <- c(\"country\", \"distribution\", \"release_date\", \"open_gross\", \"open_share\", \"gross\",\"gross_share\", \"population\", \"region\")"]},{"cell_type":"code","execution_count":6,"id":"15f8f948","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:21.574665Z","iopub.status.busy":"2023-02-25T22:12:21.572975Z","iopub.status.idle":"2023-02-25T22:12:21.596713Z","shell.execute_reply":"2023-02-25T22:12:21.594944Z"},"papermill":{"duration":0.036607,"end_time":"2023-02-25T22:12:21.599372","exception":false,"start_time":"2023-02-25T22:12:21.562765","status":"completed"},"tags":[]},"outputs":[],"source":["colnames(av_for) <- cols_av_for\n","colnames(end_for) <- cols_end_for\n","\n","colnames(end_dom_weekly) <- cols_end_wk\n","colnames(end_dom_weeknd) <- cols_end_wknd\n","\n","colnames(av_dom_weekly) <- cols_av\n","colnames(av_dom_weeknd) <- cols_av"]},{"cell_type":"code","execution_count":7,"id":"6939b610","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:21.633103Z","iopub.status.busy":"2023-02-25T22:12:21.617537Z","iopub.status.idle":"2023-02-25T22:12:21.651732Z","shell.execute_reply":"2023-02-25T22:12:21.649975Z"},"papermill":{"duration":0.046361,"end_time":"2023-02-25T22:12:21.653932","exception":false,"start_time":"2023-02-25T22:12:21.607571","status":"completed"},"tags":[]},"outputs":[],"source":["#Read in budgets\n","budget_df <- read.csv(paste(bud_fp, 'budgets_rank_2019.csv', sep=\"\"), stringsAsFactors = FALSE, header = TRUE)"]},{"cell_type":"code","execution_count":8,"id":"9303aae4","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:21.680886Z","iopub.status.busy":"2023-02-25T22:12:21.679397Z","iopub.status.idle":"2023-02-25T22:12:21.705578Z","shell.execute_reply":"2023-02-25T22:12:21.703732Z"},"papermill":{"duration":0.046184,"end_time":"2023-02-25T22:12:21.708142","exception":false,"start_time":"2023-02-25T22:12:21.661958","status":"completed"},"tags":[]},"outputs":[],"source":["#Read in box office performance\n","top_world_df <- read.csv(paste(bud_fp, 'top_world_box_office.csv', sep=\"\"), stringsAsFactors = FALSE, header = TRUE)\n","top_us_df <- read.csv(paste(bud_fp, 'top_dom_box_office.csv', sep=\"\"), stringsAsFactors = FALSE, header = TRUE)"]},{"cell_type":"code","execution_count":9,"id":"bcdaf8cc","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:21.727855Z","iopub.status.busy":"2023-02-25T22:12:21.726159Z","iopub.status.idle":"2023-02-25T22:12:21.746469Z","shell.execute_reply":"2023-02-25T22:12:21.744576Z"},"papermill":{"duration":0.032623,"end_time":"2023-02-25T22:12:21.748803","exception":false,"start_time":"2023-02-25T22:12:21.71618","status":"completed"},"tags":[]},"outputs":[],"source":["cols_av_comb <- c(\"a_Date\", \"a_Rank\", \"a_Weekly\", \"a_Pct_change\", \"a_Theaters\", \"a_Tht_change\", \"a_Avg_change\", \"a_Cum_gross\", \"a_Week_no\", \"a_Tickets\")\n","av_dom_weeknd2 <- av_dom_weeknd\n","colnames(av_dom_weeknd2) <- cols_av_comb\n","comb_data <- data.frame(end_dom_weeknd,av_dom_weeknd2[1:20,])"]},{"cell_type":"markdown","id":"dca0638b","metadata":{"papermill":{"duration":0.008139,"end_time":"2023-02-25T22:12:21.76556","exception":false,"start_time":"2023-02-25T22:12:21.757421","status":"completed"},"tags":[]},"source":["# Re-release Performance <a id=\"chapter1\"></a>"]},{"cell_type":"markdown","id":"590ae2ad","metadata":{"papermill":{"duration":0.008171,"end_time":"2023-02-25T22:12:21.782201","exception":false,"start_time":"2023-02-25T22:12:21.77403","status":"completed"},"tags":[]},"source":["<div class=\"row\">\n","    <div class=\"column\">\n","    <img src=\"https://storage.googleapis.com/kagglesdsdata/datasets/2353910/3981921/we_love_u_3000.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=databundle-worker-v2%40kaggle-161607.iam.gserviceaccount.com%2F20220726%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20220726T155639Z&X-Goog-Expires=345599&X-Goog-SignedHeaders=host&X-Goog-Signature=a5dc5e05ef286331327352976caf8435afde76c7b81e69776ab22667eece302ca1a90f57a332816d91b09a25ad9dbcc5ed87b83ec657dcf5db9bc5ece09b341485ee42434a9857147206002d91e473612da74aa88362d0a0006597b7e81f6d0ad1f957256e43a9ec672598d3b6a8acbb29b9f2416997d9547e82b3eb1431f834dc7d881afe12210ce554b8baa407bda641685b6db27251dcf1a838f3aece90b9da00deaafac88e246de68ea6563f129f284d9f7ec5e78d4230d8cda2d81baee67640d6a7c5a60e3cfee609e0bf3eaebd808933660acf4fc8a25cac602ed7ba62fe49c35e6f6dd3bc6fadecb368c8349fef83c8a4c07041b9c04dda70865af639\" width=\"190\"/>\n","    </div>\n","    <div class=\"column\">\n","    <img src=\"https://storage.googleapis.com/kagglesdsdata/datasets/2353910/3981921/av_sp_edition.jpg?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=databundle-worker-v2%40kaggle-161607.iam.gserviceaccount.com%2F20220726%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20220726T155555Z&X-Goog-Expires=345599&X-Goog-SignedHeaders=host&X-Goog-Signature=b8a21446836c1f34206ddf8388f00f2c5aa1fa54fe01cf729b46a7bb2232c6ad3ccdbb0cd08976af7d376926cb7fb11a98277bae545fa4047fc1535c01326e4b9c8d12768a5b4fc83898d5fc4272a492abc62c24169ded7d5c9c68ee6bc0a3e55a02b95ee6c74c98ea3307939c3e280eb111ba96d9a3deff6d6b00c22127b782e4c1188c69bdc1cc6166e47e32888f94847842361ceb3fdd3d346af4285640611cabd5e30b5c0d0e1b2be8acdf0cef33511524161062a9180fca007f1047c327e30e38bb73eddb3c3e9b9c76baa26db50ac57c431068b756cf6ab94f14b8c1b16e23bdb6967a48d0aeb2cc7ce6be5ba55f72aad210af8f95a211fd415d1228bb\" width=\"200\"/>\n","    </div>\n","</div>"]},{"cell_type":"markdown","id":"67d3bec0","metadata":{"papermill":{"duration":0.00806,"end_time":"2023-02-25T22:12:21.798682","exception":false,"start_time":"2023-02-25T22:12:21.790622","status":"completed"},"tags":[]},"source":["Historically when studios have a box office winner there will generally be a re-release. Interestingly enough *Avatar* and *Endgame* both had a re-release but they were very different. Here's where *Avatar* may have an edge over *Endgame* in terms of what was offered during re-release. But *Endgame* clearly had more momentum for the updated release. Below is a chart that isolates the domestic weekend performance of both movies during re-release. "]},{"cell_type":"code","execution_count":10,"id":"8c645744","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:21.819303Z","iopub.status.busy":"2023-02-25T22:12:21.81759Z","iopub.status.idle":"2023-02-25T22:12:23.5974Z","shell.execute_reply":"2023-02-25T22:12:23.595401Z"},"papermill":{"duration":1.792652,"end_time":"2023-02-25T22:12:23.600032","exception":false,"start_time":"2023-02-25T22:12:21.80738","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe src=\"p1.html\" width=100% height=500></iframe>"]},"metadata":{},"output_type":"display_data"}],"source":["m <- list(\n","  l = 75,\n","  r = 50,\n","  b = 100,\n","  t = 100,\n","  pad = 4\n",")\n","\n","end_re_data <- end_dom_weeknd[10:18,]\n","end_re_data$Week_no <- c(1:9)\n","av_re_data <- av_dom_weeknd2[35:43,]\n","av_re_data$a_Week_no <- c(1:9)\n","comb_data <- data.frame(end_re_data,av_re_data)\n","\n","cols_av_comb <- c(\"a_Date\", \"a_Rank\", \"a_Weekly\", \"a_Pct_change\", \"a_Theaters\", \"a_Tht_change\", \"a_Avg_change\", \"a_Cum_gross\", \"a_Week_no\", \"a_Tickets\")\n","\n","#new bar chart\n","p <- plot_ly(comb_data, x = ~Week_no, y = ~Gross, type = 'bar', name = 'Endgame Gross', marker = list(color = '#4F17A4'),width = 900, height = 500) %>%\n","  add_trace(y = ~a_Weekly, name = \"Avatar Gross\", marker = list(color = '#2498FE')) %>%\n","  add_trace(y = ~cumsum(Gross), name = \"Endgame Cumulative Gross\", marker = list(color = '#4F17A4'),visible=F) %>%\n","  add_trace(y = ~cumsum(a_Weekly), name = \"Avatar Cumulative Gross\", marker = list(color = '#2498FE'),visible=F) %>%\n","  add_trace(y = ~Tickets, name = \"Endgame Tickets Sold\", marker = list(color = '#4F17A4'),visible=F) %>%\n","  add_trace(y = ~a_Tickets, name = \"Avatar Tickets Sold\", marker = list(color = '#2498FE'),visible=F) %>%\n","  add_trace(y = ~Gross_adj, name = \"Endgame Adjusted Gross\", marker = list(color = '#4F17A4'),visible=F) %>%\n","  add_trace(y = ~a_Weekly, name = \"Avatar Gross\", marker = list(color = '#2498FE'),visible=F) %>%\n","  add_trace(y = ~Pct_change*100, name = \"Engame Change\", marker = list(color = '#4F17A4'),visible=F) %>%\n","  add_trace(y = ~a_Pct_change*100, name = \"Avatar Change\", marker = list(color = '#2498FE'),visible=F) %>%\n","  add_trace(y = ~Rank, name = \"Engame Rank\", marker = list(color = '#4F17A4'),visible=F) %>%\n","  add_trace(y = ~a_Rank, name = \"Avatar Rank\", marker = list(color = '#2498FE'),visible=F) %>%\n","  add_trace(y = ~Theaters, name = \"Engame Theater Count\", marker = list(color = '#4F17A4'),visible=F) %>%\n","  add_trace(y = ~a_Theaters, name = \"Avatar Theater Count\", marker = list(color = '#2498FE'),visible=F) %>%\n","  add_trace(y = ~Tht_change, name = \"Engame Theater Change\", marker = list(color = '#4F17A4'),visible=F) %>%\n","  add_trace(y = ~a_Tht_change, name = \"Avatar Theater Change\", marker = list(color = '#2498FE'),visible=F) %>%\n","  add_trace(y = ~Avg_change, name = \"Engame Revenue per Theater\", marker = list(color = '#4F17A4'),visible=F) %>%\n","  add_trace(y = ~a_Avg_change, name = \"Avatar Revenue per Theater\", marker = list(color = '#2498FE'),visible=F) %>%\n","    layout(autosize = F, margin = m, showlegend = TRUE, barmode='group',legend = list(y=0.4, xanchor ='left', yanchor = 'top'),\n","    title = \"Avatar v Endgame Domestic Re-release Performance\",\n","    yaxis = list(title = \"Millions\", dtick=1000000),\n","    xaxis = list(title=\"Week\",ticktext = end_dom_weekly$Week_no, tickvals=end_dom_weekly$Week_no),\n","    updatemenus = list(\n","\n","      list(\n","        x=-0.1,\n","        xanchor ='middle',\n","        yanchor = 'top',\n","        pad = list(r=10, b=5),\n","        buttons = list(\n","          list(method = \"update\",\n","               args = list(list(visible=list(T, T, F, F,F,F,F,F,F,F,F,F,F,F,F,F,F,F)), list(yaxis=list(title=\"Millions\", dtick=1000000))),\n","               label = \"Weekend Gross\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, F, T, T,F,F,F,F,F,F,F,F,F,F,F,F,F,F)), list(yaxis=list(title=\"Millions\", dtick=1000000))),\n","               label = \"Cumulative Gross\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, F, F, F,T,T,F,F,F,F,F,F,F,F,F,F,F,F)), list(yaxis=list(title=\"Tickets\"))),\n","               label = \"Tickets Sold\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, F, F, F,F,F,T,T,F,F,F,F,F,F,F,F,F,F)), list(yaxis=list(title=\"Inf. Adj. Gross\", dtick=1000000))),\n","               label = \"Inf. Adj. Gross\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, F, F, F,F,F,F,F,T,T,F,F,F,F,F,F,F,F)), list(yaxis=list(title=\"Gross Pct Change\"))),\n","               label = \"Gross Pct Change\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, F, F, F,F,F,F,F,F,F,T,T,F,F,F,F,F,F)), list(yaxis=list(title=\"Rank\",range=list(0,30)))),\n","               label = \"Weekly Rank\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, F, F, F,F,F,F,F,F,F,F,F,T,T,F,F,F,F)), list(yaxis=list(title=\"Number of Theaters\"))),\n","               label = \"Theater Count\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, F, F, F,F,F,F,F,F,F,F,F,F,F,T,T,F,F)), list(yaxis=list(title=\"Pct. Change\"))),\n","               label = \"Theater Count Change\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, F, F, F,F,F,F,F,F,F,F,F,F,F,F,F,T,T)), list(yaxis=list(title=\"Avg. Revenue per Theater\"))),\n","               label = \"Average Revenue/Theater\")\n","          )\n","        \n","        )\n","    )\n","    )\n","  \n","htmlwidgets::saveWidget(p, \"p1.html\")\n","display_html('<iframe src=\"p1.html\" width=100% height=500></iframe>')"]},{"cell_type":"markdown","id":"db7baa97","metadata":{"papermill":{"duration":0.008865,"end_time":"2023-02-25T22:12:23.617482","exception":false,"start_time":"2023-02-25T22:12:23.608617","status":"completed"},"tags":[]},"source":["\n","The most meaningful categories to examine here are Weekend Gross, Theater Count Change, Tickets Sold, and Average Revenue per Theater. The interpretation of all these comparisons is mixed. *Endgame* had a much wider re-release than *Avatar* but *Avatar* brought in a larger audience per theater throughout the release. The percent change in weekend revenue is a little deceiving because *Avatar* went from bringing in 10 grand the last weekend to 4 million during re-release. *Endgame* went from one million to six million in the same regard. The number of tickets sold shows again that Endgame had a larger re-release audience but these were at different points relative to the theatrical release. Overall these were two very different re-releases given the timing of each one, but *Endgame* dominated the dollar amounts while *Avatar* was perhaps a higher quality re-release that delivered more value to individual theaters and brought in a consistent audience week over week.\n","\n","\n","\n","<table>\n","<thead>\n","<tr class=\"header\">\n","<th style=\"text-align: center;\" class=\"avat\"></th>\n","<th style=\"text-align: center;\", class=\"avenge\">Avengers: Endgame</th>\n","<th style=\"text-align: center;\" class=\"avat\">Avatar</th>\n","</tr>\n","</thead>\n","<tbody>\n","<tr class=\"odd\">\n","<td style=\"text-align: left;\" class=\"tbltxt\">Release Weekend</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">Jun 28-30</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">Aug 27-29</td>\n","</tr>\n","<tr class=\"even\">\n","<td style=\"text-align: left;\" class=\"tbltxt\">Weekend Gross</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">\\$6,108,700 (Inf. Adj. \\$5,349,400)</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">$4,007,750</td>\n","</tr>\n","<tr class=\"odd\">\n","<td style=\"text-align: left;\" class=\"tbltxt\">Gross Pct. Change</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">207\\%</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">380\\%</td>\n","</tr>\n","<tr class=\"odd\">\n","<td style=\"text-align: left;\" class=\"tbltxt\">Length</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">5</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">12</td>\n","</tr>\n","<tr class=\"odd\">\n","<td style=\"text-align: left;\" class=\"tbltxt\">Number of Theaters</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">2,025</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">812</td>\n","</tr>\n","<tr class=\"odd\">\n","<td style=\"text-align: left;\" class=\"tbltxt\">Theater Pct. Change</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">1040\\%</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">811\\%</td>\n","</tr>\n","<tr class=\"odd\">\n","<td style=\"text-align: left;\" class=\"tbltxt\">Special Items</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">Poster, intro, deleted scene</td>\n","<td style=\"text-align: center;\" class=\"tbltxt\">About eight new scenes</td>\n","</tr>\n","\n","</tbody>\n","</table>"]},{"cell_type":"markdown","id":"3bf651d8","metadata":{"papermill":{"duration":0.008893,"end_time":"2023-02-25T22:12:23.6345","exception":false,"start_time":"2023-02-25T22:12:23.625607","status":"completed"},"tags":[]},"source":["\n","I will admit, I thought the *Endgame* re-release was pretty sloppy. Its came across like they met together two weeks-before and decided to try and run for the *Avatar* record as fast as possible. *Avatar* on the other hand offered movie-goers a lot more additional content during the movie than *Endgame*. *Endgame* just had one deleted scene during the post credits and a brief intro by the director. Having said that, they had a 1040\\% increase in the number of theaters showing the movie that weekend and they made over a million more that weekend then *Avatar* made the first weekend of re-release. That could be because people like *Endgame* a lot better or it could be because the re-release happened on week 10 of the original release. *Avatar*'s re-release happened after there was only one theater left showing it during the beginning of August 2010 and it was 36 weeks after the original release so there was much more motivation to return to theaters for fans. \n","\n","I have a feeling that this won't be the last we see of the Marvel Studios re-release shenanigans. Remember how they started the end-credits scene trend? Certainly made more people stay in their seats for the credits. \n","\n","\n","\n","\n"]},{"cell_type":"markdown","id":"f824f6cf","metadata":{"papermill":{"duration":0.008257,"end_time":"2023-02-25T22:12:23.651663","exception":false,"start_time":"2023-02-25T22:12:23.643406","status":"completed"},"tags":[]},"source":["\n","# Final Thoughts <a id=\"chapter2\"></a>\n","\n","*Avatar* held the record for all time worldwide unadjusted gross for almost ten years along with several other notable box office records that it still holds today. It really was a huge accomplishment for its time and for the type of movie that was being presented. However, when you dig into the numbers *Avatar*'s success was a result of many factors other than perhaps being a great film. The argument that *Endgame* is a better movie than *Avatar* or vice-versa just based on the worldwide gross revenue number is really naive. *Avatar*'s largest differentiating factor was the technology used to film the movie and create a really unique immersive experience. But *Avatar* falls into a category of films that make a lot of money because they are in the theater for so much longer than normal and has relatively low competition. \n","\n","The main factors I found that contributed to a record-breaking box office number for *Avatar* were:\n","\n","- 34 week release time followed by 12 week re-release. \n","- Large distribution across the world (76 countries).\n","- Lack of competition at the box office.\n","- Higher ticket sales during economic recession. \n","- Higher average ticket prices (IMAX, 3D).\n","\n","\n","The main factors I found that makes *Avengers: Endgame* performance so impressive were:\n","\n","- Large competitive summer box office environment.\n","- Smaller foreign distribution than *Avatar*.\n","- Overall [declining](https://thehustle.co/why-is-movie-theater-popcorn-so-outrageously-expensive/) theater audience.\n","- Record set by 46 week release broken by week 15.\n","\n","Are *Avengers: Endgame* and *Avatar* on the same level becuase of the similarity in global box office? I would say no based on the factors listed above. However each movie stands on its own as an impressive box office winner. But I can say for sure that the next time I hear someone discuss the quality of either movie relative to one box office record number I'll roll my eyes and say....\n","\n","\n"]},{"cell_type":"markdown","id":"bab88c06","metadata":{"papermill":{"duration":0.008879,"end_time":"2023-02-25T22:12:23.668767","exception":false,"start_time":"2023-02-25T22:12:23.659888","status":"completed"},"tags":[]},"source":["<div align=center style=\"height:100%; width:100%\">\n","    <img src=\"https://storage.googleapis.com/kagglesdsdata/datasets/2353910/3981921/of_course.png?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=databundle-worker-v2%40kaggle-161607.iam.gserviceaccount.com%2F20220726%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20220726T155703Z&X-Goog-Expires=345599&X-Goog-SignedHeaders=host&X-Goog-Signature=4ae3b172ffc60c640e9b76a48a1753a90f7adcf4de271757ce8768e6804c48103f2b858d2ad788f34a122aa5359f92b9e057351887f2833b723c577297c6cef1546391a85a9b0472bda0d32cc8b152b75f2954d4f29b7c657be319f2de8ad872f78d60ef6d84791ed537f5dcee0422d3342bcd7ca3111446c54ed325c66a79e7c657211e8f61172812270fa55c170f0d52d9c6efcf9daac4b0ecd375623a7faa60050e51dea887f3204602145ecc270b04617328a09f5338d3d7929324abb7fb975a831c4dfcd532356b6c772e11156c93e8d176870220e5d94397ef073f4a313055451fb61a4ff3df668d1c24abce33b92bda48d322f80032c049128f0a9498\" width=\"400\"/>\n","</div>"]},{"cell_type":"markdown","id":"adda19d9","metadata":{"papermill":{"duration":0.008186,"end_time":"2023-02-25T22:12:23.685097","exception":false,"start_time":"2023-02-25T22:12:23.676911","status":"completed"},"tags":[]},"source":["\n","\n","\n","Of course *Avatar* fans shouldn't lose all hope because there could still be some box office gold that lies ahead.\n","\n","\n"]},{"cell_type":"markdown","id":"f155e1ad","metadata":{"papermill":{"duration":0.00826,"end_time":"2023-02-25T22:12:23.701928","exception":false,"start_time":"2023-02-25T22:12:23.693668","status":"completed"},"tags":[]},"source":["<div align=center>\n","    <img src=\"https://pbs.twimg.com/media/FRdWsFNUYAE6cW5?format=jpg&name=900x900\" width=\"500\"/>\n","</div>"]},{"cell_type":"markdown","id":"8ebad4f8","metadata":{"papermill":{"duration":0.008315,"end_time":"2023-02-25T22:12:23.718281","exception":false,"start_time":"2023-02-25T22:12:23.709966","status":"completed"},"tags":[]},"source":["\n","<div align=center>\n","    <img src=\"https://storage.googleapis.com/kagglesdsdata/datasets/2353910/3981921/five_to_go.png?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=databundle-worker-v2%40kaggle-161607.iam.gserviceaccount.com%2F20220726%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20220726T155721Z&X-Goog-Expires=345599&X-Goog-SignedHeaders=host&X-Goog-Signature=6c23752fba020b16a1489e85148564ef96cd610c6832d0527947b8144fa2b4ba218aade42d5323666ee5f068a373724cea4896152956a6b76dd1855eeacc653a42253e7575cbac817b96b5e0c615bb723c4ffb1d797640e114ffd2e1ef3d81ebe33f05f1a2ed0f2399a23892550aabce54f7d8f10fb9aef8656af35bff90632377509674603c9a18064c158e84e4cefda33b88de537959b8a23e77a71433d27eb1ba5754bbc21dcdc6074d0f1ce91dc8c7f8e33b7db8bea4edbb231ff48f75f642b9400991a8aa786f76fbbfdfc46320d4115e23bd636f26baebf0bb6a83bd7b7fbc1631301a025842e4c768ac4dae8a6923f376e00f14ed8629a1cd463a3eb0\" width=\"250\"/>\n","</div>"]},{"cell_type":"markdown","id":"34704040","metadata":{"papermill":{"duration":0.008203,"end_time":"2023-02-25T22:12:23.734631","exception":false,"start_time":"2023-02-25T22:12:23.726428","status":"completed"},"tags":[]},"source":["\n","# Sources <a id=\"chapter3\"></a>\n","\n","[1] (n.d.). Box Office Mojo. Retrieved from https://www.boxofficemojo.com/\n","\n","\n","[2] (n.d.). Movies: TV Shows: Movie Trailers: Reviews. Retrieved from https://www.rottentomatoes.com/\n","\n","\n","[3] (n.d.). Population, total. Retrieved from https://data.worldbank.org/indicator/sp.pop.totl?end=2010&start=1960\n","\n","[4] (n.d.). Central America Population 2019. Retrieved from http://worldpopulationreview.com/continents/central-america-population/\n","\n","[5] (n.d.). Eastern Africa Population (LIVE). Retrieved from https://www.worldometers.info/world-population/eastern-africa-population/\n","\n","[6] (n.d.). Retrieved from https://www.internetworldstats.com/list1.htm\n","\n","[7] What's New In The Avatar Special Edition, And Why You Should Go See It. (2018, October 8). Retrieved from https://www.cinemablend.com/new/What-Avatar-Special-Edition-Why-You-Should-Go-See-It-20393.html\n","\n","[8] Harris, D. (n.d.). ‘Avatar’ online trailer claims top spot. Retrieved from https://variety.com/2009/digital/news/avatar-online-trailer-claims-top-spot-1118012187/\n","\n","[9] Pomerantz, D. (2012, July 11). Is Avatar Really King Of The Box Office? Retrieved from https://www.forbes.com/2010/01/27/avatar-box-office-business-entertainment-avatar.html#6cdaea6870ba\n","\n","[10] Plotly Technologies Inc. Collaborative data science. Montréal, QC, 2015. https://plot.ly.\n","\n","\n"]},{"cell_type":"markdown","id":"1d25c19b","metadata":{"papermill":{"duration":0.008046,"end_time":"2023-02-25T22:12:23.750982","exception":false,"start_time":"2023-02-25T22:12:23.742936","status":"completed"},"tags":[]},"source":["# Appendix <a id=\"chapter4\"></a>\n","\n","The interactive charts shown below allow further examination of the data sets used in this article. "]},{"cell_type":"markdown","id":"91e3e09d","metadata":{"papermill":{"duration":0.008323,"end_time":"2023-02-25T22:12:23.767357","exception":false,"start_time":"2023-02-25T22:12:23.759034","status":"completed"},"tags":[]},"source":["## Weekly <a id=\"chapter5\"></a>"]},{"cell_type":"code","execution_count":11,"id":"887e8a10","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:23.787586Z","iopub.status.busy":"2023-02-25T22:12:23.785931Z","iopub.status.idle":"2023-02-25T22:12:24.424726Z","shell.execute_reply":"2023-02-25T22:12:24.422826Z"},"papermill":{"duration":0.652048,"end_time":"2023-02-25T22:12:24.427703","exception":false,"start_time":"2023-02-25T22:12:23.775655","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe src=\"p2.html\" width=100% height=500></iframe>"]},"metadata":{},"output_type":"display_data"}],"source":["p <- plot_ly(end_dom_weekly, x = ~Week_no,width = 900, height = 500) %>%\n","  add_lines(y = ~Gross, name = \"Gross\", line = list(color = '#4F17A4', width = 4)) %>%\n","  add_lines(y = ~Cum_gross, name = \"Cumulative Gross\", line = list(color = '#4F17A4', width = 4), visible = F) %>%\n","  add_lines(y = ~Gross_adj, name = \"Inf. Adj. Gross\",line = list(color = '#4F17A4', width = 4), visible = F) %>%\n","  add_lines(y = ~Pct_change, name = \"Pct. change\",line = list(color = '#4F17A4', width = 4), visible = F) %>%\n","  add_lines(y = ~Rank, name = \"Weekly Rank\",line = list(color = '#4F17A4', width = 4), visible = F) %>%\n","  layout(autosize = F, margin = m, showlegend = FALSE,\n","    title = \"Endgame Weekly Performance\",\n","    yaxis = list(title = \"Millions\", dtick=25000000),\n","    xaxis = list(title=\"Week\",ticktext = end_dom_weekly$Date, tickvals=end_dom_weekly$Week_no),\n","    updatemenus = list(\n","\n","      list(\n","        x=-0.1,\n","        xanchor ='middle',\n","        yanchor = 'top',\n","        pad = list(r=10, b=5),\n","        buttons = list(\n","          list(method = \"update\",\n","               args = list(list(visible=list(T, F, F, F,F)), list(yaxis=list(title=\"Millions\", dtick=50000000))),\n","               label = \"Weekly Gross\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, T, F, F, F)), list(yaxis=list(title=\"Millions\", dtick=50000000))),\n","               label = \"Cumulative Gross\"),\n","             list(method = \"update\",\n","               args = list(list(visible=list(F,F,T,F,F)), list(yaxis=list(title=\"Inf. Adj. Gross\", dtick=50000000))),\n","               label = \"Inf. Adj. Gross\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F,F,F,T,F)), list(yaxis=list(title=\"Gross Pct Change\"))),\n","               label = \"Gross Pct Change\"),\n","                    list(method = \"update\",\n","               args = list(list(visible=list(F,F,F,F,T)), list(yaxis=list(title=\"Rank\",range=list(0,70)))),\n","               label = \"Weekly Rank\")\n","          )\n","        \n","        )\n","    )\n","  )\n","  \n","\n","htmlwidgets::saveWidget(p, \"p2.html\")\n","display_html('<iframe src=\"p2.html\" width=100% height=500></iframe>')"]},{"cell_type":"code","execution_count":12,"id":"d1f8df28","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:24.448934Z","iopub.status.busy":"2023-02-25T22:12:24.447298Z","iopub.status.idle":"2023-02-25T22:12:25.044478Z","shell.execute_reply":"2023-02-25T22:12:25.042776Z"},"papermill":{"duration":0.610273,"end_time":"2023-02-25T22:12:25.047034","exception":false,"start_time":"2023-02-25T22:12:24.436761","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe src=\"p3.html\" width=100% height=500></iframe>"]},"metadata":{},"output_type":"display_data"}],"source":["\n","p <- plot_ly(av_dom_weekly, x = ~Week_no, width = 900, height = 500) %>%\n","  add_lines(y = ~Weekly, name = \"Weekly Gross\",line = list(color = '#2498FE', width = 4)) %>%\n","  add_lines(y = ~Cum_gross, name = \"Cumulative Weekly Gross\", visible = F,line = list(color = '#2498FE', width = 4)) %>%\n","  add_lines(y = ~Pct_change, name = \"Gross Pct Change\",line = list(color = '#2498FE', width = 4), visible = F) %>%\n","  add_lines(y = ~Rank, name = \"Weekly Rank\",line = list(color = '#2498FE', width = 4), visible = F) %>%\n","  layout(autosize = F, margin = m,showlegend = FALSE,\n","    title = \"Avatar Weekly Performance\",\n","    yaxis = list(title = \"Millions\", range=list(0,300000000)),\n","    xaxis = list(title=\"Week\",ticktext = av_dom_weekly$Date, tickvals=av_dom_weekly$Week_no),\n","    updatemenus = list(\n","      list(\n","        x=-0.1,\n","        xanchor ='middle',\n","        yanchor = 'top',\n","        pad = list(r=10, b=5),\n","        buttons = list(\n","          list(method = \"update\",\n","               args = list(list(visible=list(T, F, F,F)), list(yaxis=list(title=\"Millions\", dtick=50000000))),\n","               label = \"Weekly Gross\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, T, F, F)), list(yaxis=list(title=\"Millions\", dtick=50000000))),\n","               label = \"Cumulative Gross\"),\n","\n","          list(method = \"update\",\n","               args = list(list(visible=list(F,F,T,F)), list(yaxis=list(title=\"Gross Pct Change\",range=list(-1,1)))),\n","               label = \"Gross Pct Change\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F,F,F,T)), list(yaxis=list(title=\"Rank\",range=list(0,70)))),\n","               label = \"Weekly Rank\")\n","          \n","          \n","          )\n","        \n","        )\n","  )\n","  )\n","  \n","htmlwidgets::saveWidget(p, \"p3.html\")\n","display_html('<iframe src=\"p3.html\" width=100% height=500></iframe>')"]},{"cell_type":"markdown","id":"799a7614","metadata":{"papermill":{"duration":0.008691,"end_time":"2023-02-25T22:12:25.064878","exception":false,"start_time":"2023-02-25T22:12:25.056187","status":"completed"},"tags":[]},"source":["## Weekend <a id=\"chapter6\"></a>"]},{"cell_type":"code","execution_count":13,"id":"272a9ffb","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:25.086051Z","iopub.status.busy":"2023-02-25T22:12:25.084361Z","iopub.status.idle":"2023-02-25T22:12:25.699956Z","shell.execute_reply":"2023-02-25T22:12:25.698104Z"},"papermill":{"duration":0.62869,"end_time":"2023-02-25T22:12:25.702287","exception":false,"start_time":"2023-02-25T22:12:25.073597","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe src=\"p4.html\" width=100% height=500></iframe>"]},"metadata":{},"output_type":"display_data"}],"source":["\n","\n","#Weekend\n","\n","p <- plot_ly(end_dom_weeknd, x = ~Week_no,width = 900, height = 500) %>%\n","  add_lines(y = ~Gross, name = \"Week\", line = list(color = '#4F17A4', width = 4)) %>%\n","  add_lines(y = ~Cum_gross, name = \"Cumulative Gross\", line = list(color = '#4F17A4', width = 4), visible = F) %>%\n","    add_lines(y = ~Gross_adj, name = \"Inf. Adj. Gross\",line = list(color = '#4F17A4', width = 4), visible = F) %>%\n","  add_lines(y = ~Pct_change, name = \"Gross Pct Change\",line = list(color = '#4F17A4', width = 4), visible = F) %>%\n","   add_lines(y = ~Rank, name = \"Weekend Rank\",line = list(color = '#4F17A4', width = 4), visible = F) %>%\n","  layout(autosize = F, margin = m, showlegend = FALSE,\n","    title = \"Endgame Weekend Performance\",\n","    yaxis = list(title = \"Millions\", dtick=25000000),\n","    xaxis = list(title=\"Weekend\",ticktext = end_dom_weekly$Date, tickvals=end_dom_weekly$Week_no),\n","    updatemenus = list(\n","\n","      list(\n","        x=-0.1,\n","        xanchor ='middle',\n","        yanchor = 'top',\n","        pad = list(r=10, b=5),\n","        buttons = list(\n","          list(method = \"update\",\n","               args = list(list(visible=list(T,F,F,F,F)), list(yaxis=list(title=\"Millions\", dtick=50000000))),\n","               label = \"Weekend Gross\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F,T,F,F,F)), list(yaxis=list(title=\"Millions\", dtick=50000000))),\n","               label = \"Cumulative Gross\"),\n","             list(method = \"update\",\n","               args = list(list(visible=list(F,F,T,F,F)), list(yaxis=list(title=\"Inf. Adj. Gross\", dtick=50000000))),\n","               label = \"Inf. Adj. Gross\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F,F,F,T,F)), list(yaxis=list(title=\"Pct. Change\"))),\n","               label = \"Pct. change\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F,F,F,F,T)), list(yaxis=list(title=\"Weekend Rank\",range=list(0,70)))),\n","               label = \"Weekend Rank\")\n","          )\n","    )\n","  )\n","  )  \n","\n","htmlwidgets::saveWidget(p, \"p4.html\")\n","display_html('<iframe src=\"p4.html\" width=100% height=500></iframe>')\n"]},{"cell_type":"code","execution_count":14,"id":"a907ce7c","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:25.722987Z","iopub.status.busy":"2023-02-25T22:12:25.721349Z","iopub.status.idle":"2023-02-25T22:12:26.328557Z","shell.execute_reply":"2023-02-25T22:12:26.314456Z"},"papermill":{"duration":0.620704,"end_time":"2023-02-25T22:12:26.331623","exception":false,"start_time":"2023-02-25T22:12:25.710919","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe src=\"p5.html\" width=100% height=500></iframe>"]},"metadata":{},"output_type":"display_data"}],"source":["\n","p <- plot_ly(av_dom_weeknd, x = ~Week_no, width = 900, height = 500) %>%\n","  add_lines(y = ~Weekly, name = \"Weekly Gross\",line = list(color = '#2498FE', width = 4)) %>%\n","  add_lines(y = ~Cum_gross, name = \"Cumulative Weekly Gross\", visible = F,line = list(color = '#2498FE', width = 4)) %>%\n","  add_lines(y = ~Pct_change, name = \"Gross Pct Change\",line = list(color = '#2498FE', width = 4), visible = F) %>%\n","  layout(autosize = F, margin = m,showlegend = FALSE,\n","    title = \"Avatar Weekend Performance\",\n","    yaxis = list(title = \"Millions\", range=list(0,300000000)),\n","    xaxis = list(title=\"Weekend\",ticktext = av_dom_weeknd$Date, tickvals=av_dom_weeknd$Week_no),\n","    updatemenus = list(\n","\n","\n","      list(\n","        x=-0.1,\n","        xanchor ='middle',\n","        yanchor = 'top',\n","        pad = list(r=10, b=5),\n","        buttons = list(\n","          list(method = \"update\",\n","               args = list(list(visible=list(T, F, F)), list(yaxis=list(title=\"Millions\"))),\n","               label = \"Weekend Gross\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, T, F)), list(yaxis=list(title=\"Millions\"))),\n","               label = \"Cumulative Gross\"),\n","\n","          list(method = \"update\",\n","               args = list(list(visible=list(F,F,T)), list(yaxis=list(title=\"Gross Pct Change\"))),\n","               label = \"Gross Pct Change\"))\n","        \n","        )\n","  )\n","  )\n","  \n","htmlwidgets::saveWidget(p, \"p5.html\")\n","display_html('<iframe src=\"p5.html\" width=100% height=500></iframe>')"]},{"cell_type":"markdown","id":"ec615c41","metadata":{"papermill":{"duration":0.010213,"end_time":"2023-02-25T22:12:26.350515","exception":false,"start_time":"2023-02-25T22:12:26.340302","status":"completed"},"tags":[]},"source":["## Theaters <a id=\"chapter7\"></a>"]},{"cell_type":"code","execution_count":15,"id":"b80ce300","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:26.371067Z","iopub.status.busy":"2023-02-25T22:12:26.369554Z","iopub.status.idle":"2023-02-25T22:12:26.935557Z","shell.execute_reply":"2023-02-25T22:12:26.933763Z"},"papermill":{"duration":0.57928,"end_time":"2023-02-25T22:12:26.938358","exception":false,"start_time":"2023-02-25T22:12:26.359078","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe src=\"p6.html\" width=100% height=500></iframe>"]},"metadata":{},"output_type":"display_data"}],"source":["\n","#Theaters\n","\n","p <- plot_ly(end_dom_weeknd, x = ~Week_no,width = 900, height = 500) %>%\n","  add_lines(y = ~Theaters, name = \"Theater Count\", line = list(color = '#4F17A4', width = 4)) %>%\n","  add_lines(y = ~Tht_change, name = \"Theater Change\", line = list(color = '#4F17A4', width = 4), visible = F) %>%\n","  add_lines(y = ~Avg_change, name = \"Average Revenue per Theater\",line = list(color = '#4F17A4', width = 4), visible = F) %>%\n","  layout(autosize = F, margin = m, showlegend = FALSE,\n","    title = \"Endgame Theater Performance\",\n","    yaxis = list(title = \"Number of Theaters\", zeroline = TRUE, autorange=FALSE,range=list(0,5000)),\n","    xaxis = list(title=\"Weekend\",ticktext = end_dom_weekly$Date, tickvals=end_dom_weekly$Week_no),\n","    updatemenus = list(\n","\n","      list(\n","        x=-0.1,\n","        xanchor ='middle',\n","        yanchor = 'top',\n","        pad = list(r=10, b=5),\n","        buttons = list(\n","          list(method = \"update\",\n","               args = list(list(visible=list(T, F, F)), list(yaxis=list(title=\"Number of Theaters\"))),\n","               label = \"Theater Count\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, T, F)), list(yaxis=list(title=\"Change\"))),\n","               label = \"Theater Change\"),\n","\n","          list(method = \"update\",\n","               args = list(list(visible=list(F,F,T)), list(yaxis=list(title=\"Revenue\"))),\n","               label = \"Average Revenue per Theater\"))\n","        \n","        )\n","    )\n","  )\n","  \n","htmlwidgets::saveWidget(p, \"p6.html\")\n","display_html('<iframe src=\"p6.html\" width=100% height=500></iframe>')"]},{"cell_type":"code","execution_count":16,"id":"a10cb140","metadata":{"execution":{"iopub.execute_input":"2023-02-25T22:12:26.959936Z","iopub.status.busy":"2023-02-25T22:12:26.958423Z","iopub.status.idle":"2023-02-25T22:12:27.541688Z","shell.execute_reply":"2023-02-25T22:12:27.540007Z"},"papermill":{"duration":0.596624,"end_time":"2023-02-25T22:12:27.544016","exception":false,"start_time":"2023-02-25T22:12:26.947392","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe src=\"p7.html\" width=100% height=500></iframe>"]},"metadata":{},"output_type":"display_data"}],"source":["\n","p <- plot_ly(av_dom_weeknd, x = ~Week_no,width = 900, height = 500) %>%\n","  add_lines(y = ~Theaters, name = \"Theater Count\", line = list(color = '#2498FE', width = 4)) %>%\n","  add_lines(y = ~Tht_change, name = \"Theater Change\", line = list(color = '#2498FE', width = 4), visible = F) %>%\n","  add_lines(y = ~Avg_change, name = \"Average Revenue per Theater\",line = list(color = '#2498FE', width = 4), visible = F) %>%\n","  layout(autosize = F, margin = m, showlegend = FALSE,\n","    title = \"Avatar Theater Performance\",\n","    yaxis = list(title = \"Number of Theaters\", zeroline = TRUE),\n","    xaxis = list(title=\"Weekend\",ticktext = av_dom_weekly$Date, tickvals=av_dom_weekly$Week_no),\n","    updatemenus = list(\n","\n","      list(\n","        x=-0.1,\n","        xanchor ='middle',\n","        yanchor = 'top',\n","        pad = list(r=10, b=5),\n","        buttons = list(\n","          list(method = \"update\",\n","               args = list(list(visible=list(T, F, F)), list(yaxis=list(title=\"Number of Theaters\"))),\n","               label = \"Theater Count\"),\n","          list(method = \"update\",\n","               args = list(list(visible=list(F, T, F)), list(yaxis=list(title=\"Change\"))),\n","               label = \"Theater Change\"),\n","\n","          list(method = \"update\",\n","               args = list(list(visible=list(F,F,T)), list(yaxis=list(title=\"Revenue\"))),\n","               label = \"Average Revenue per Theater\"))\n","        \n","        )\n","    )\n","  )\n","  \n","htmlwidgets::saveWidget(p, \"p7.html\")\n","display_html('<iframe src=\"p7.html\" width=100% height=500></iframe>')"]}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"codemirror_mode":"r","file_extension":".r","mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"4.0.5"},"papermill":{"default_parameters":{},"duration":46.759429,"end_time":"2023-02-25T22:12:27.673268","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2023-02-25T22:11:40.913839","version":"2.3.4"}},"nbformat":4,"nbformat_minor":5}